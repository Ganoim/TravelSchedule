<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.TravelSchedule.dao.TravelDao">
  <select id="selectCalendar" resultType="calendar">
  select * from calendar where mid=#{mid}
  </select>
  <insert id="insertCalendar">
  insert into calendar(mid, cdcode, cdname) values(#{mid}, #{cdcode}, #{cdname})
  </insert>
  <select id="maxcode">
  select nvl(max(cdcode),'CD00000') from calendar where mid = #{mid}
  </select>
  <select id="selectCdcode" resultType="calendar">
  select distinct cdcode, cdname from calendar where mid = #{mid} order by cdcode
  </select>
  <insert id="insertFKcode">
  insert into schedule(mid, cdcode, tdcode) values(#{mid},#{cdcode},#{tdcode})
  </insert>
  <select id="selectSchedule" resultType="sc">
  select * from schedule where mid = #{mid} and cdcode = #{cdcode}
  </select>
  <select id="selectTdest" resultType="tdest">
  select * from tdest where tdcode = #{tdcode}
  </select>
  <update id="updateSc">
  update schedule set
  <if test="seloption == 'tdest'">
  scdate = to_date(#{sc.scdate}, 'YYYY/MM/DD HH24:MI')
  </if>
  where mid = #{sc.mid} and cdcode = #{sc.cdcode} and
  <if test="seloption == 'tdest'">
  tdcode = #{sc.tdcode}
  </if>
  </update>
  <select id="select_sc_td_join" resultType="hashmap">
  select * from schedule sc inner join tdest td on sc.tdcode = td.tdcode where sc.mid= #{mid} and sc.cdcode = #{cdcode}
  </select>
  </mapper>